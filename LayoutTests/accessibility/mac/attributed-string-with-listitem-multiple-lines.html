<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<script src="../../resources/js-test.js"></script>
</head>
<body>

<ol>
<li id="item1"><p>First line</p>second line</li>
<li id="item2"><p>Long long long long long long long long long long long long long long long long long long long long long long long long long long long long long long long long long long long</p></li>
</ol>

<script>
let output = "This tests that when list item has text of multiple lines we only speak the list marker for the first line.\n\n";

if (window.accessibilityController) {
    var listItem1 = accessibilityController.accessibleElementById("item1");
    var p1 = listItem1.childAtIndex(1);
    var firstLineRange = p1.textMarkerRangeForElement(p1);
    output += `${p1.stringForTextMarkerRange(firstLineRange)}\n`;

    // Get second line.
    var firstLineEnd = p1.endTextMarkerForTextMarkerRange(firstLineRange);
    var secondLineRange = p1.lineTextMarkerRangeForTextMarker(p1.nextTextMarker(firstLineEnd));
    output += `${p1.stringForTextMarkerRange(secondLineRange).trim()}\n`;

    // Soft line break.
    var listItem2 = accessibilityController.accessibleElementById("item2");
    var item2Range = listItem2.textMarkerRangeForElement(listItem2);
    var firstLineStart = listItem2.startTextMarkerForTextMarkerRange(item2Range);
    firstLineRange = listItem2.lineTextMarkerRangeForTextMarker(firstLineStart);
    output += `${listItem2.stringForTextMarkerRange(firstLineRange)}\n`;

    firstLineEnd = listItem2.endTextMarkerForTextMarkerRange(firstLineRange);
    secondLineRange = listItem2.lineTextMarkerRangeForTextMarker(listItem2.nextTextMarker(firstLineEnd));
    output += `${listItem2.stringForTextMarkerRange(secondLineRange).trim()}\n`;

    debug(output);
}
</script>
</body>
</html>
